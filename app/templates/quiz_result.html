{% extends "base.html" %}
{% block title %}Quiz Result - RoboScholar{% endblock %}
{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-gray-900 border border-gray-800 rounded-lg p-6">
        <p class="text-lg mb-4">{{ question.question }}</p>

        <div class="space-y-3 mb-6">
            {% for choice in question.choices %}
            <div class="flex items-center gap-3 rounded-lg px-4 py-3 border
                {% if loop.index0 == question.correct_index %}
                    bg-green-900/30 border-green-700 text-green-300
                {% elif loop.index0 == selected %}
                    bg-red-900/30 border-red-700 text-red-300
                {% else %}
                    bg-gray-800 border-gray-700 text-gray-400
                {% endif %}">
                <span>{{ choice }}</span>
                {% if loop.index0 == question.correct_index %}
                <span class="ml-auto text-xs font-medium">Correct</span>
                {% elif loop.index0 == selected and not is_correct %}
                <span class="ml-auto text-xs">Your answer</span>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        {% if is_correct %}
        <div class="bg-green-900/30 border border-green-700 rounded-lg p-4 mb-4">
            <p class="text-green-300 font-semibold">Correct! +{{ points_earned }} points</p>
        </div>
        {% else %}
        <div class="bg-red-900/30 border border-red-700 rounded-lg p-4 mb-4">
            <p class="text-red-300 font-semibold">Incorrect</p>
        </div>
        {% endif %}

        {% if question.explanation %}
        <div class="bg-gray-800 border border-gray-700 rounded-lg p-5 mb-4">
            <h3 class="text-sm font-semibold text-indigo-400 uppercase tracking-wide mb-2">Answer</h3>
            <p class="text-gray-300 text-sm leading-relaxed">{{ question.explanation }}</p>
        </div>
        {% endif %}

        {% if question.why_it_matters %}
        <div class="bg-indigo-950/40 border border-indigo-900 rounded-lg p-5 mb-6">
            <h3 class="text-sm font-semibold text-indigo-400 uppercase tracking-wide mb-2">Why this matters</h3>
            <p class="text-gray-300 text-sm leading-relaxed">{{ question.why_it_matters }}</p>
        </div>
        {% endif %}

        <a href="/papers/{{ paper.slug }}/quiz"
           class="inline-block bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg transition">
            Next Question
        </a>
    </div>
</div>
{% endblock %}
